# THIS IS AN AUTOMATICALLY GENERATED FILE.
# DO NOT MODIFY BY HAND!!
#
# Generated by zcm-gen
#

begin
@static if VERSION < v"0.7.0-"
    @assert endswith(string(current_module()), "juliazcm.types") "Only import this module through its parent"
else
    @assert endswith(string(@__MODULE__), "juliazcm.types") "Only import this module through its parent"
end

import ZCM

export demo_t
mutable struct demo_t <: ZCM.AbstractZcmType

    # **********************
    # Members
    # **********************

    timestamp                     ::Int64
    name                          ::String


    function demo_t()

        self = new()

        # **********************
        # Members
        # **********************

        self.timestamp = 0
        self.name = ""

        return self
    end

end

const __demo_t_hash = Ref(Int64(0))
function ZCM._get_hash_recursive(::Type{demo_t}, parents::Array{String})
    if __demo_t_hash[] != 0; return __demo_t_hash[]; end
    if "demo_t" in parents; return 0; end
    hash::UInt64 = 0x19e1f2954f09cb22
    hash = (hash << 1) + ((hash >>> 63) & 0x01)
    __demo_t_hash[] = reinterpret(Int64, hash)
    return __demo_t_hash[]
end

function ZCM.getHash(::Type{demo_t})
    return ZCM._get_hash_recursive(demo_t, Array{String,1}())
end

function ZCM._encode_one(msg::demo_t, buf)
    write(buf, hton(msg.timestamp))
    write(buf, hton(UInt32(length(msg.name) + 1)))
    write(buf, msg.name)
    write(buf, UInt8(0))
end

function ZCM.encode(msg::demo_t)
    buf = IOBuffer()
    write(buf, hton(ZCM.getHash(demo_t)))
    ZCM._encode_one(msg, buf)
    return ZCM.take!(buf);
end

function ZCM._decode_one(::Type{demo_t}, buf)
    msg = demo_t();
    msg.timestamp = ntoh(reinterpret(Int64, read(buf, 8))[1])
    msg.name = String(read(buf, ntoh(reinterpret(UInt32, read(buf, 4))[1])))[1:end-1]
    return msg
end

function ZCM.decode(::Type{demo_t}, data::Vector{UInt8})
    buf = IOBuffer(data)
    if ntoh(reinterpret(Int64, read(buf, 8))[1]) != ZCM.getHash(demo_t)
        throw("Decode error")
    end
    return ZCM._decode_one(demo_t, buf)
end

function ZCM.fieldnames(::Type{demo_t})
    return (
        :timestamp,
        :name,
    )
end

function ZCM.constfieldnames(::Type{demo_t})
    return (
    )
end

end # `begin` block
